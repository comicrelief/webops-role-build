---

- name: Update npm
  become: true
  npm:
    name: npm
    global: true
    state: latest

- name: Install packages globally using npm
  become: true
  npm:
    name: "{{item}}"
    state: latest
    global: true
  with_items: "{{ npm_packages |default([]) }}"

- name: Install Python modules globally with pip
  become: true
  pip:
    name: "{{item}}"
  with_items: "{{ pip_packages |default([]) }}"

- name: Creates files needed before the build
  template:
    source: "files/{{ item.source |default([]) }}"
    dest: "{{ item.dest |default([]) }}"
    mode: "{{ item.mode |default('0644') }}"
  with_items: "{{ pre_build_files }}"
