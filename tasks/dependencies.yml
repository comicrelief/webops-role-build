---

- name: Add apt repos
  apt_repository:
    repo: "{{item}}"
    update-cache: no
  with_items: apt_repos
  when: apt_repos is defined
  register: update_apt

- name: Update apt cache if necessary
  apt:
    update-cache: yes
  when: update_apt is defined and update_apt.changed == True

# Task to install deps using apt
- name: Install apt packages
  apt:
    name: "{{ item }}"
    state: latest
  with_items: "{{ apt_packages }}"
  when: apt_packages is defined


# Task to install pip
- name: Install pip
  easy_install:
    name: pip
    state: latest # keep this up to date
  when: pip_packages is defined

# Task to install composer
# Task to install bundler
# Task to install npm
# Task to install deps using pip
- name: Install Python modules with pip
  pip:
    name: "{{item}}"
  with_items: pip_packages
  when: pip_packages is defined

# Task to install deps using composer
# Task to install deps using bundler
# Task to install deps using npm
